/*!
 * @project        retour
 * @name           redirects.js
 * @author         Andrew Welch
 * @build          Wed Dec 09 2020 05:04:58 GMT+0000 (Coordinated Universal Time)
 * @copyright      Copyright (c) 2020 Â©2020 nystudio107.com
 *
 */
(self.webpackChunkretour=self.webpackChunkretour||[]).push([[11],{2722:function(e,t,a){"use strict";var n=a(7495),i=(a(2222),a(9653),[{name:"__checkbox",titleClass:"center aligned",dataClass:"center aligned"},{name:"__component:legacy-url",sortField:"redirectSrcUrl",title:"Legacy URL Pattern",titleClass:"center",dataClass:"center"},{name:"redirectDestUrl",sortField:"redirectDestUrl",title:"Redirect To",titleClass:"center",dataClass:"center",callback:"urlFormatter"},{name:"redirectMatchType",sortField:"redirectMatchType",title:"Match Type",titleClass:"text-left",dataClass:"text-left",callback:"matchFormatter"},{name:"siteName",sortField:"siteId",title:"Sites",titleClass:"text-left",dataClass:"text-left"},{name:"redirectHttpCode",sortField:"redirectHttpCode",title:"Status",titleClass:"text-left",dataClass:"text-left"},{name:"hitCount",sortField:"hitCount",title:"Hits",titleClass:"text-right",dataClass:"text-right"},{name:"hitLastTime",sortField:"hitLastTime",title:"Last Hit",titleClass:"center",dataClass:"center"}]),r={props:{rowData:{type:Object,required:!0},rowIndex:{type:Number}},computed:{linkTitle:function(){var e="";return e+=this.rowData.redirectSrcUrl},redirectEnabled:function(){return+this.rowData.enabled?"live":""}}},s=a(1900),l=(0,s.Z)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a",{staticClass:"go",attrs:{href:e.rowData.editLink,title:e.linkTitle}},[a("span",{staticStyle:{"white-space":"nowrap"}},[a("span",{staticClass:"status",class:e.redirectEnabled}),a("span",{staticStyle:{"white-space":"normal"}},[e._v(e._s(e.rowData.redirectSrcUrl))])])])])}),[],!1,null,null,null).exports,o=a(6545),c=a(5931),u=a(7850),d=a(9546);Vue.component("legacy-url",l);var f={components:{vuetable:o.Z,"vuetable-pagination":c.Z,"vuetable-pagination-info":u.Z,"vuetable-filter-bar":d.Z},props:{siteId:{type:Number,default:0},apiUrl:{type:String,default:""}},data:function(){return{moreParams:{siteId:this.siteId},css:{tableClass:"data fullwidth retour-redirects",ascendingIcon:"menubtn retour-menubtn-asc",descendingIcon:"menubtn retour-menubtn-desc"},sortOrder:[{field:"hitCount",sortField:"hitCount",direction:"desc"}],fields:i,numSelected:0,selectedIds:[]}},computed:{csrfTokenName:function(){return window.Craft.csrfTokenName},csrfTokenValue:function(){return window.Craft.csrfTokenValue}},mounted:function(){var e=this;this.$events.$on("filter-set",(function(t){return e.onFilterSet(t)})),this.$events.$on("filter-reset",(function(t){return e.onFilterReset()})),this.$refs.vuetable.$on("vuetable:checkbox-toggled",(function(t,a){return e.onCheckboxToggled(t,a)})),this.$refs.vuetable.$on("vuetable:checkbox-toggled-all",(function(t){return e.onCheckboxToggled(t,null)}))},methods:{onFilterSet:function(e){this.moreParams={filter:e,siteId:this.siteId},this.$events.fire("refresh-table",this.$refs.vuetable)},onFilterReset:function(){this.moreParams={siteId:this.siteId},this.$events.fire("refresh-table",this.$refs.vuetable)},onPaginationData:function(e){this.$refs.paginationTop.setPaginationData(e),this.$refs.paginationInfoTop.setPaginationData(e),this.$refs.pagination.setPaginationData(e),this.$refs.paginationInfo.setPaginationData(e)},onChangePage:function(e){this.$refs.vuetable.changePage(e)},onCheckboxToggled:function(e,t){this.numSelected=0,this.selectedIds=[],void 0!==this.$refs.vuetable&&void 0!==this.$refs.vuetable.selectedTo&&(this.numSelected=this.$refs.vuetable.selectedTo.length,this.selectedIds=this.$refs.vuetable.selectedTo)},matchFormatter:function(e){var t="Pluing Match";switch(e){case"exactmatch":t="Exact Match";break;case"regexmatch":t="RegEx Match"}return t},urlFormatter:function(e){return""===e?"":'\n            <a class="go" href="'.concat(e,'" title="').concat(e,'" target="_blank" rel="noopener">').concat(e,"</a>\n            ")},deleteRedirectFormatter:function(e){return""===e?"":'\n            <a class="delete icon" href="'.concat(e,'" title="Delete"></a>\n            ')}}},h=(0,s.Z)(f,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"py-4"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0!==e.numSelected,expression:"numSelected !== 0"}]},[a("form",{attrs:{method:"post","accept-charset":"UTF-8"}},[a("input",{attrs:{type:"hidden",name:e.csrfTokenName},domProps:{value:e.csrfTokenValue}}),e._v(" "),e._l(e.selectedIds,(function(e){return a("input",{attrs:{type:"hidden",name:"redirectIds[]"},domProps:{value:e}})})),e._v(" "),a("label",{staticClass:"text-gray-600"},[e._v(e._s(e.numSelected)+" redirect"),1!==e.numSelected?a("span",[e._v("s")]):e._e(),e._v(":")]),e._v(" "),e._m(0)],2)]),e._v(" "),a("vuetable-filter-bar",{directives:[{name:"show",rawName:"v-show",value:0===e.numSelected,expression:"numSelected === 0"}]}),e._v(" "),a("div",{staticClass:"vuetable-pagination clearafter"},[a("vuetable-pagination-info",{ref:"paginationInfoTop"}),e._v(" "),a("vuetable-pagination",{ref:"paginationTop",on:{"vuetable-pagination:change-page":e.onChangePage}})],1),e._v(" "),a("vuetable",{ref:"vuetable",attrs:{"api-url":e.apiUrl,"per-page":20,fields:e.fields,css:e.css,"sort-order":e.sortOrder,"append-params":e.moreParams},on:{"vuetable:pagination-data":e.onPaginationData}}),e._v(" "),a("div",{staticClass:"vuetable-pagination clearafter border-solid"},[a("vuetable-pagination-info",{ref:"paginationInfo"}),e._v(" "),a("vuetable-pagination",{ref:"pagination",on:{"vuetable-pagination:change-page":e.onChangePage}})],1)],1)}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"btngroup inline"},[a("div",{staticClass:"btn menubtn",attrs:{"data-icon":"settings"}}),e._v(" "),a("div",{staticClass:"menu",attrs:{"data-align":"right"}},[a("ul",[a("li",[a("a",{staticClass:"formsubmit",attrs:{"data-action":"retour/redirects/delete-redirects"}},[e._v("Delete")])])])])])}],!1,null,null,null).exports;Vue.use(n.Z);new Vue({el:"#cp-nav-content",components:{"redirects-table":h},data:{},methods:{onTableRefresh:function(e){Vue.nextTick((function(){return e.refresh()}))}},mounted:function(){var e=this;this.$events.$on("refresh-table",(function(t){return e.onTableRefresh(t)}))}})}},0,[[2722,666,216,351]]]);
//# sourceMappingURL=redirects.js.map