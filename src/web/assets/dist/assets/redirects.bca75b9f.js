import{n,b as d,s as u,p as f,_ as h}from"./vendor.8a4eaaf9.js";import{V as p,a as v,b as m}from"./VuetableFilterBar.0f759aad.js";var g=[{name:"__checkbox",titleClass:"center aligned",dataClass:"center aligned"},{name:"__component:legacy-url",sortField:"redirectSrcUrl",title:"Legacy URL Pattern",titleClass:"center",dataClass:"center"},{name:"redirectDestUrl",sortField:"redirectDestUrl",title:"Redirect To",titleClass:"center",dataClass:"center",callback:"urlFormatter"},{name:"redirectMatchType",sortField:"redirectMatchType",title:"Match Type",titleClass:"text-left",dataClass:"text-left",callback:"matchFormatter"},{name:"siteName",sortField:"siteId",title:"Sites",titleClass:"text-left",dataClass:"text-left"},{name:"redirectHttpCode",sortField:"redirectHttpCode",title:"Status",titleClass:"text-left",dataClass:"text-left"},{name:"hitCount",sortField:"hitCount",title:"Hits",titleClass:"text-right",dataClass:"text-right"},{name:"hitLastTime",sortField:"hitLastTime",title:"Last Hit",titleClass:"center",dataClass:"center"}],b=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("a",{staticClass:"go",attrs:{href:e.rowData.editLink,title:e.linkTitle}},[t("span",{staticStyle:{"white-space":"nowrap"}},[t("span",{staticClass:"status",class:e.redirectEnabled}),t("span",{staticStyle:{"white-space":"normal"}},[e._v(e._s(e.rowData.redirectSrcUrl))])])])])},_=[];const C={props:{rowData:{type:Object,required:!0},rowIndex:{type:Number}},computed:{linkTitle:function(){let e="";return e+=this.rowData.redirectSrcUrl,e},redirectEnabled:function(){let e="";return+this.rowData.enabled?"live":e}}},l={};var x=n(C,b,_,!1,$,null,null,null);function $(e){for(let a in l)this[a]=l[a]}var T=function(){return x.exports}(),P=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("div",{directives:[{name:"show",rawName:"v-show",value:e.numSelected!==0,expression:"numSelected !== 0"}]},[t("form",{attrs:{method:"post","accept-charset":"UTF-8"}},[t("input",{attrs:{type:"hidden",name:e.csrfTokenName},domProps:{value:e.csrfTokenValue}}),e._l(e.selectedIds,function(s){return t("input",{attrs:{type:"hidden",name:"redirectIds[]"},domProps:{value:s}})}),t("label",{staticClass:"text-gray-600"},[e._v(e._s(e.numSelected)+" redirect"),e.numSelected!==1?t("span",[e._v("s")]):e._e(),e._v(":")]),e._m(0)],2)]),t("vuetable-filter-bar",{directives:[{name:"show",rawName:"v-show",value:e.numSelected===0,expression:"numSelected === 0"}],attrs:{"initial-filter-text":e.filterText}}),t("div",{staticClass:"vuetable-pagination clearafter"},[t("vuetable-pagination-info",{ref:"paginationInfoTop"}),t("div",{staticClass:"floated left vuetable-pagination-info py-3"},[t("div",{staticClass:"inline pl-3 text-gray-600"},[e._v("Per-page:")]),t("div",{staticClass:"inline pl-3 text-gray-600"},[t("div",{staticClass:"select"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.perPage,expression:"perPage"}],staticClass:"fieldtoggle",attrs:{"data-target-prefix":"per-page-",name:"perPage"},on:{change:function(s){var i=Array.prototype.filter.call(s.target.options,function(r){return r.selected}).map(function(r){var c="_value"in r?r._value:r.value;return c});e.perPage=s.target.multiple?i:i[0]}}},[t("option",{attrs:{value:"20",selected:""}},[e._v("20")]),t("option",{attrs:{value:"50"}},[e._v("50")]),t("option",{attrs:{value:"100"}},[e._v("100")]),t("option",{attrs:{value:"500"}},[e._v("500")])])])])]),t("vuetable-pagination",{ref:"paginationTop",on:{"vuetable-pagination:change-page":e.onChangePage}})],1),t("vuetable",{ref:"vuetable",attrs:{"api-url":e.apiUrl,"per-page":e.perPage,fields:e.fields,css:e.css,"sort-order":e.sortOrder,"append-params":e.moreParams},on:{"vuetable:pagination-data":e.onPaginationData}}),t("div",{staticClass:"vuetable-pagination clearafter border-solid"},[t("vuetable-pagination-info",{ref:"paginationInfo"}),t("vuetable-pagination",{ref:"pagination",on:{"vuetable-pagination:change-page":e.onChangePage}})],1)],1)},y=[function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"btngroup inline"},[t("div",{staticClass:"btn menubtn",attrs:{"data-icon":"settings"}}),t("div",{staticClass:"menu",attrs:{"data-align":"right"}},[t("ul",[t("li",[t("a",{staticClass:"formsubmit",attrs:{"data-action":"retour/redirects/delete-redirects"}},[e._v("Delete")])])])])])}];Vue.component("legacy-url",T);const S={components:{vuetable:d,"vuetable-pagination":p,"vuetable-pagination-info":v,"vuetable-filter-bar":m},mixins:[u],props:{siteId:{type:Number,default:0},apiUrl:{type:String,default:""}},data:function(){return{moreParams:{siteId:this.siteId},css:{tableClass:"data fullwidth retour-redirects",ascendingIcon:"menubtn retour-menubtn-asc",descendingIcon:"menubtn retour-menubtn-desc"},sortOrder:[{field:"hitCount",sortField:"hitCount",direction:"desc"}],fields:g,numSelected:0,selectedIds:[],filterText:"",perPage:20}},computed:{csrfTokenName:function(){return window.Craft.csrfTokenName},csrfTokenValue:function(){return window.Craft.csrfTokenValue}},watch:{perPage:function(e){this.$events.fire("refresh-table",this.$refs.vuetable)}},mounted(){this.$events.$on("filter-set",e=>this.onFilterSet(e)),this.$events.$on("filter-reset",e=>this.onFilterReset()),this.$refs.vuetable.$on("vuetable:checkbox-toggled",(e,a)=>this.onCheckboxToggled(e,a)),this.$refs.vuetable.$on("vuetable:checkbox-toggled-all",e=>this.onCheckboxToggled(e,null))},methods:{getSaveStateConfig(){return{cacheKey:"retour-redirects-state-"+Craft.username+Craft.siteId,ignoreProperties:["numSelected","selectedIds"]}},onFilterSet(e){this.filterText=e,this.moreParams={filter:this.filterText,siteId:this.siteId},this.$events.fire("refresh-table",this.$refs.vuetable)},onFilterReset(){this.filterText="",this.moreParams={filter:this.filterText,siteId:this.siteId},this.$events.fire("refresh-table",this.$refs.vuetable)},onPaginationData(e){this.$refs.paginationTop.setPaginationData(e),this.$refs.paginationInfoTop.setPaginationData(e),this.$refs.pagination.setPaginationData(e),this.$refs.paginationInfo.setPaginationData(e)},onChangePage(e){this.$refs.vuetable.changePage(e)},onCheckboxToggled(e,a){this.numSelected=0,this.selectedIds=[],this.$refs.vuetable!==void 0&&this.$refs.vuetable.selectedTo!==void 0&&(this.numSelected=this.$refs.vuetable.selectedTo.length,this.selectedIds=this.$refs.vuetable.selectedTo)},matchFormatter(e){let a="Pluing Match";switch(e){case"exactmatch":a="Exact Match";break;case"regexmatch":a="RegEx Match";break}return a},urlFormatter(e){if(e==="")return"";e=f.sanitize(e);let a=e;return!new RegExp("^(?:[a-z]+:)?//","i").test(a)&&!a.includes("$")&&(a=Craft.getSiteUrl(Craft.trim(e,"/"))),`
                <a class="go" href="${a}" title="${a}" target="_blank" rel="noopener">${e}</a>
                `},deleteRedirectFormatter(e){return e===""?"":`
                <a class="delete icon" href="${e}" title="Delete"></a>
                `}}},o={};var w=n(S,P,y,!1,I,null,null,null);function I(e){for(let a in o)this[a]=o[a]}var F=function(){return w.exports}();Vue.use(h);new Vue({el:"#cp-nav-content",components:{"redirects-table":F},data:{},methods:{onTableRefresh(e){Vue.nextTick(()=>e.refresh())}},mounted(){this.$events.$on("refresh-table",e=>this.onTableRefresh(e))}});
//# sourceMappingURL=redirects.bca75b9f.js.map
